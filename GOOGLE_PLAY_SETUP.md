# Google Play Console 申請手順書

## 事前準備完了項目 ✅

### アプリ構成
- ✅ 全ファイルがwww/ディレクトリに配置済み
- ✅ Google Play Billing API実装済み
- ✅ Stripe決済を完全削除
- ✅ アプリアイコン設定済み (192px, 512px)
- ✅ マニフェスト設定完了
- ✅ 署名設定完了

### 技術仕様
- **アプリID**: com.itpassport.app
- **バージョン**: 1.0.0 (versionCode: 1)
- **最小SDK**: Android 7.0 (API 24)
- **対象SDK**: 最新Android

## Google Play Console 設定手順

### 1. デベロッパーアカウント作成
```
1. https://play.google.com/console にアクセス
2. Googleアカウントでログイン
3. $25 の登録料を支払い
4. 開発者プロフィールを入力
```

### 2. 新しいアプリを作成
```
1. 「アプリを作成」をクリック
2. アプリの詳細:
   - アプリ名: ITパスポート過去問アプリ
   - デフォルトの言語: 日本語
   - アプリまたはゲーム: アプリ
   - 無料または有料: 無料（アプリ内購入あり）
   - 宣言: すべての項目に同意
```

### 3. アプリ内商品の設定
```
収益化 > 商品 > アプリ内商品 > 商品を作成

■ 商品1
- 商品ID: ad_free  ※重要：コードと完全一致必須
- 名前: 広告オフ機能
- 説明: アプリ内の広告を完全に非表示にします
- 価格: ¥680
- 状態: 有効

■ 商品2  
- 商品ID: mock_test ※重要：コードと完全一致必須
- 名前: 模擬試験パック
- 説明: 本格的な模擬試験機能を解放します
- 価格: ¥980
- 状態: 有効
```

### 4. アプリの詳細設定

#### アプリのコンテンツ
```
■ アプリのアクセス権限
- インターネット: はい（学習コンテンツの読み込み）
- 課金: はい（Google Play Billing使用）

■ 広告
- 「はい、アプリに広告が表示されます」を選択
- 広告ネットワーク: 自社広告のみ

■ コンテンツレーティング
- 質問表に回答
- 教育アプリ: 全年齢対象で承認される見込み
```

#### データセーフティ
```
■ データの収集・共有
「いいえ、このアプリはユーザーデータを収集または共有しません」を選択

理由：
- 学習データはローカル保存のみ
- 課金データはGoogle Play経由（申告不要）
- 外部サーバーとの通信なし
```

### 5. ストア掲載情報
```
■ 簡潔な説明 (80文字以内)
ITパスポート試験対策の決定版！500問の充実コンテンツで確実合格を目指そう

■ 詳しい説明 (4000文字以内)
🎯 ITパスポート試験 完全対策アプリ

【主な特徴】
✅ 業界最多500問を収録
✅ 分野別学習対応（戦略・企画、システム戦略、テクノロジー）  
✅ 詳細な解説付き
✅ 学習進捗の可視化
✅ オフライン学習対応

【有料機能】
• 広告オフ機能（¥680）
• 模擬試験パック（¥980）

ITパスポートの合格を目指すすべての方に最適な学習環境を提供します。
```

#### アプリアイコンとスクリーンショット
```
■ アプリアイコン
- 512×512px PNG形式
- IT関連のシンボル（本、証明書、PCなど）
- 青系統のカラーテーマ

■ スクリーンショット（各4-8枚必須）
- ホーム画面
- 問題画面  
- 解答・解説画面
- 学習進捗画面
- 設定画面
```

### 6. リリース管理

#### 内部テスト（推奨）
```
1. テスト > 内部テスト > 新しいリリースを作成
2. AABファイルをアップロード（後述のビルド手順参照）
3. リリース名: v1.0.0 - 初回リリース
4. リリースノート: "ITパスポート学習アプリの初回リリースです"
5. テスターリストに自分のGoogleアカウントを追加
6. 「確認」→ 内部テスト開始
```

#### 本番リリース
```
1. 内部テストで動作確認完了後
2. 本番 > 新しいリリースを作成
3. 内部テストと同じAABファイルを使用
4. 「本番環境で公開」→ 送信
5. Google審査待ち（通常1-3日）
```

## AABファイルの生成手順

### 前提条件
```bash
# Java JDK 11以上をインストール
# JAVA_HOME環境変数を設定

# 確認コマンド
java -version
```

### キーストア作成（初回のみ）
```bash
cd android/app
keytool -genkey -v -keystore release-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias itpassport-key

# 入力情報（例）
パスワード: itpassport123
名前: IT Passport App
組織: Your Company  
市区町村: Tokyo
都道府県: Tokyo
国コード: JP
```

### AABファイル生成
```bash
# プロジェクトルートから実行
npx cap copy android
cd android
./gradlew bundleRelease

# 生成されるファイル
# android/app/build/outputs/bundle/release/app-release.aab
```

### 動作テスト
```bash
# デバッグビルドでテスト
./gradlew assembleDebug
# 実機に直接インストールして課金機能をテスト
```

## 重要チェックリスト

### リリース前確認
- [ ] Product ID が完全一致（ad_free, mock_test）
- [ ] 課金テスト正常完了
- [ ] 購入後のAcknowledge処理動作確認
- [ ] 再インストール後の購入復元確認
- [ ] Stripe関連コード完全削除確認

### 審査通過のポイント
- [ ] アプリの機能がストア説明と一致
- [ ] 課金機能が正常動作
- [ ] クラッシュやバグなし
- [ ] プライバシーポリシーが適切
- [ ] コンテンツが適切（教育目的）

## サポート情報
- **技術サポート**: Capacitor/Android Studio使用
- **課金サポート**: Google Play Billing API v6.0
- **問い合わせ先**: Google Play Console ヘルプセンター